package com.gli.model;

import jakarta.persistence.*;
import jakarta.validation.constraints.*;
import lombok.*;

import java.time.LocalDate;

@Entity
@Data
@NoArgsConstructor
@AllArgsConstructor
public class Policy {

    @Id
    @GeneratedValue(strategy = GenerationType.IDENTITY)
    private Long id;

    @NotBlank(message = "Policy number is required")
    @Column(unique = true)
    private String policyNumber;

    @FutureOrPresent(message = "Effective date cannot be in the past")
    private LocalDate effectiveDate;

    @Future(message = "Expiration date must be in the future")
    private LocalDate expirationDate;

    @NotBlank(message = "Coverage details are required")
    private String coverageDetails;

    @Positive(message = "Total premium must be positive")
    private double totalPremium;

    @NotBlank(message = "Policy status is required")
    private String status;  // Issued, Cancelled, Expired

    @OneToOne
    @JoinColumn(name = "quote_id", nullable = false)
    private Quote quote;
}
